{"ast":null,"code":"import _asyncToGenerator from\"/Users/abraham/fun/gcksmint/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/abraham/fun/gcksmint/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _taggedTemplateLiteral from\"/Users/abraham/fun/gcksmint/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject;import _regeneratorRuntime from\"/Users/abraham/fun/gcksmint/node_modules/@babel/runtime/regenerator/index.js\";import styled from'styled-components';import Button from'@material-ui/core/Button';import{CircularProgress}from'@material-ui/core';import{GatewayStatus,useGateway}from'@civic/solana-gateway-react';import{useEffect,useState}from'react';import{whitelistSettings,publicSaleSettings,mintPanic}from'./userSettings';import{toDate}from'./utils';import{jsx as _jsx}from\"react/jsx-runtime\";export var CTAButton=styled(Button)(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  \\n  width: 100%;\\n  height: 60px;\\n  margin-top: 10px;\\n  margin-bottom: 5px;\\n  background: linear-gradient(180deg, #604ae5 0%, #813eee 100%);\\n  color: white;\\n  font-size: 16px;\\n  font-weight: bold;\\n\"])));// add your styles here\nexport var MintButton=function MintButton(_ref){var _toDate,_toDate2,_toDate3,_toDate4;var onMint=_ref.onMint,candyMachine=_ref.candyMachine,isMinting=_ref.isMinting;var _useGateway=useGateway(),requestGatewayToken=_useGateway.requestGatewayToken,gatewayStatus=_useGateway.gatewayStatus;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),clicked=_useState2[0],setClicked=_useState2[1];var whitelistStartDate=(_toDate=toDate(whitelistSettings.startDate))===null||_toDate===void 0?void 0:_toDate.getTime();var whitelistEndDate=(_toDate2=toDate(whitelistSettings.endDate))===null||_toDate2===void 0?void 0:_toDate2.getTime();var publicMintStart=(_toDate3=toDate(publicSaleSettings.startDate))===null||_toDate3===void 0?void 0:_toDate3.getTime();var publicMintEnd=(_toDate4=toDate(publicSaleSettings.endDate))===null||_toDate4===void 0?void 0:_toDate4.getTime();function whiteListSaleCheck(){if(whitelistSettings.enabled&&whitelistStartDate&&whitelistEndDate&&Date.now()>whitelistStartDate&&Date.now()<whitelistEndDate){return true;}else{return false;}}var WhitelistMintActive=whiteListSaleCheck();console.log('is Whitelist Sale Active? '+whiteListSaleCheck());function publicSaleCheck(){if(publicMintStart&&publicMintEnd){if(Date.now()>publicMintStart&&Date.now()<publicMintEnd){return true;}else{return false;}}else if(publicMintStart){if(Date.now()>publicMintStart){return true;}else{return false;}}}var PublicMintActive=publicSaleCheck();console.log('is public sale live? '+publicSaleCheck());console.log(candyMachine===null||candyMachine===void 0?void 0:candyMachine.state.isSoldOut,isMinting,WhitelistMintActive||PublicMintActive,!(candyMachine!==null&&candyMachine!==void 0&&candyMachine.state.isActive));useEffect(function(){if(gatewayStatus===GatewayStatus.ACTIVE&&clicked){console.log('Minting');onMint();setClicked(false);}},[gatewayStatus,clicked,setClicked,onMint]);return/*#__PURE__*/_jsx(CTAButton,{className:\"minting-button\",disabled:(candyMachine===null||candyMachine===void 0?void 0:candyMachine.state.isSoldOut)||isMinting||mintPanic.enabled||!(WhitelistMintActive||PublicMintActive),onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var token;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setClicked(true);if(!(candyMachine!==null&&candyMachine!==void 0&&candyMachine.state.isActive&&candyMachine!==null&&candyMachine!==void 0&&candyMachine.state.gatekeeper)){_context.next=15;break;}console.log('gatekeeper active');if(!(gatewayStatus===GatewayStatus.ACTIVE)){_context.next=8;break;}console.log(gatewayStatus+GatewayStatus.ACTIVE);setClicked(true);_context.next=13;break;case 8:console.log('requeting token');_context.next=11;return requestGatewayToken();case 11:token=_context.sent;console.log(token);case 13:_context.next=18;break;case 15:_context.next=17;return onMint();case 17:setClicked(false);case 18:case\"end\":return _context.stop();}}},_callee);})),variant:\"contained\",children:/*#__PURE__*/_jsx(\"div\",{className:\"mint-button-text\",children:candyMachine!==null&&candyMachine!==void 0&&candyMachine.state.isSoldOut?'SOLD OUT':isMinting?/*#__PURE__*/_jsx(CircularProgress,{}):mintPanic.enabled?'Mint Paused':'MINT'})});};","map":{"version":3,"sources":["/Users/abraham/fun/gcksmint/src/MintButton.tsx"],"names":["styled","Button","CircularProgress","GatewayStatus","useGateway","useEffect","useState","whitelistSettings","publicSaleSettings","mintPanic","toDate","CTAButton","MintButton","onMint","candyMachine","isMinting","requestGatewayToken","gatewayStatus","clicked","setClicked","whitelistStartDate","startDate","getTime","whitelistEndDate","endDate","publicMintStart","publicMintEnd","whiteListSaleCheck","enabled","Date","now","WhitelistMintActive","console","log","publicSaleCheck","PublicMintActive","state","isSoldOut","isActive","ACTIVE","gatekeeper","token"],"mappings":"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","sourcesContent":["import styled from 'styled-components';\nimport Button from '@material-ui/core/Button';\nimport { CandyMachineAccount } from './candy-machine';\n\nimport { CircularProgress } from '@material-ui/core';\nimport { GatewayStatus, useGateway } from '@civic/solana-gateway-react';\nimport { useEffect, useState } from 'react';\nimport { whitelistSettings, publicSaleSettings, mintPanic } from './userSettings';\nimport { toDate }  from './utils'\n\n\nexport const CTAButton = styled(Button)`\n  \n  width: 100%;\n  height: 60px;\n  margin-top: 10px;\n  margin-bottom: 5px;\n  background: linear-gradient(180deg, #604ae5 0%, #813eee 100%);\n  color: white;\n  font-size: 16px;\n  font-weight: bold;\n`; // add your styles here\n\nexport const MintButton = ({\n  onMint,\n  candyMachine,\n  \n  isMinting,\n  \n  \n}: {\n  onMint: () => Promise<void>;\n  candyMachine: CandyMachineAccount | undefined;\n  \n  isMinting: boolean;\n \n}) => {\n  const { requestGatewayToken, gatewayStatus } = useGateway();\n  const [clicked, setClicked] = useState(false);\n  const whitelistStartDate = toDate(whitelistSettings.startDate)?.getTime();\n  const whitelistEndDate = toDate(whitelistSettings.endDate)?.getTime();\n  const publicMintStart = toDate(publicSaleSettings.startDate)?.getTime();\n  const publicMintEnd = toDate(publicSaleSettings.endDate)?.getTime();\n\n  function whiteListSaleCheck() {\n    if (whitelistSettings.enabled && (whitelistStartDate && whitelistEndDate ) && Date.now() > whitelistStartDate && Date.now() < whitelistEndDate) {\n      \n      return true\n    } else {\n      \n      return false\n    }\n  }\n  \n  let WhitelistMintActive = whiteListSaleCheck()\n  console.log('is Whitelist Sale Active? ' + whiteListSaleCheck())\n\n  function publicSaleCheck() {\n\n    if (publicMintStart && publicMintEnd){\n      if(Date.now() > publicMintStart && Date.now() < publicMintEnd){\n        return true\n      } else {\n        return false\n      }\n    }\n    else if (publicMintStart) {\n      if (Date.now() > publicMintStart){\n        return true\n      } else {\n        return false\n      }\n    \n    }\n\n\n  }\n\n  let PublicMintActive = publicSaleCheck()\n\n  console.log('is public sale live? '+ publicSaleCheck())\n  \n  console.log(candyMachine?.state.isSoldOut, isMinting, (WhitelistMintActive || PublicMintActive) ,!candyMachine?.state.isActive)\n\n  useEffect(() => {\n    if (gatewayStatus === GatewayStatus.ACTIVE && clicked) {\n      console.log('Minting');\n      onMint();\n      setClicked(false);\n    }\n  }, [gatewayStatus, clicked, setClicked, onMint]);\n  return (\n    <CTAButton\n      className='minting-button'\n      disabled={\n        candyMachine?.state.isSoldOut ||\n        isMinting ||\n        mintPanic.enabled ||\n        !(WhitelistMintActive || PublicMintActive)\n        \n\n      }\n      onClick={async () => {\n        setClicked(true);\n        if (candyMachine?.state.isActive && candyMachine?.state.gatekeeper) {\n          console.log('gatekeeper active')\n          if (gatewayStatus === GatewayStatus.ACTIVE) {\n            console.log(gatewayStatus + GatewayStatus.ACTIVE)\n            setClicked(true);\n          } else {\n            console.log('requeting token')\n             let token = await requestGatewayToken();\n            console.log(token);\n          }\n        } else {\n          await onMint();\n          setClicked(false);\n        }\n      }}\n      variant=\"contained\"\n    >\n      <div className='mint-button-text'>\n      {candyMachine?.state.isSoldOut ? (\n        'SOLD OUT'\n      ) : isMinting ? (\n        <CircularProgress />\n      \n      ) : mintPanic.enabled ? (\n\n        'Mint Paused'\n\n      ) :  (\n        'MINT'\n      )}\n      </div>\n    </CTAButton>\n  );\n};"]},"metadata":{},"sourceType":"module"}